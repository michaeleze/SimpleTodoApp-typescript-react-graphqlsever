(this.webpackJsonpTODOAPP=this.webpackJsonpTODOAPP||[]).push([[3],{19:function(e,t,a){},20:function(e,t,a){},33:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(17),i=a(0),l=a.n(i),s=(a(19),a(10)),c=a(11),u=a(38),d=a(37),r=new(function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this)).url=void 0,n.url=e,n}return Object(c.a)(a,[{key:"getTaskList",value:function(){var e=JSON.stringify({query:"{getTaskList { \n id \n text \n }}"});this.useFetch(e,"POST","getTaskList")}},{key:"addTask",value:function(e){var t=Math.floor(20*Math.random()),a=JSON.stringify({query:"mutation ($id: ID!, $text: String!){ addTask (id: $id, text: $text){ \n id \n text \n }}",variables:{id:t,text:e}});this.useFetch(a,"POST","addTask")}},{key:"updateTask",value:function(e,t){var a=JSON.stringify({query:"mutation ($id: ID!, $text: String!){ updateTask (id: $id, text: $text){ \n id \n text \n }}",variables:{id:e,text:t}});this.useFetch(a,"POST","updateTask")}},{key:"deleteTask",value:function(e,t){var a=JSON.stringify({query:"mutation ($id: ID!){ deleteTask (id: $id){ \n id \n text \n }}",variables:{id:e}});this.useFetch(a,"POST","deleteTask")}},{key:"useFetch",value:function(e,t,a){var n=this;fetch(this.url,{body:e,headers:{"Content-Type":"application/json",Accept:"application/json"},method:t}).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){return n.notify(e.data[a])})).catch((function(e){console.log(e)}))}}]),a}(function(){function e(){Object(s.a)(this,e),this.observers=[]}return Object(c.a)(e,[{key:"subscribe",value:function(e){this.observers.push(e)}},{key:"notify",value:function(e){this.observers.map((function(t){return t(e)}))}},{key:"unsubscribe",value:function(e){return this.observers.filter((function(t){return t!==e}))}}]),e}()))("https://us-central1-sampletodo123.cloudfunctions.net/graphqlApp"),o=(a(20),a(12)),m=function(e){var t=e.handleChange,a=e.handleCreateNewTask;return l.a.createElement("table",{className:"add-container","data-testid":"add-task"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"add-input"},l.a.createElement("textarea",{className:"add-input--field",onChange:t,placeholder:"Add new task","data-testid":"add-task-text"})),l.a.createElement("td",null,l.a.createElement("button",{className:"add-button",onClick:a,"data-testid":"add-button"},l.a.createElement(o.b,null))))))},f=a(21),b=a.n(f),h=(a(33),function(e){var t=Object(i.useState)(),a=Object(n.a)(t,2),s=a[0],c=a[1],u=e.handleCloseModal,d=e.handleUpdateTask,r=e.modalItem,o=e.isOpen;return l.a.createElement(b.a,{ariaHideApp:!1,isOpen:o,onAfterOpen:function(){c(r.text)}},l.a.createElement("table",{className:"modal-content"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"modal-text"},l.a.createElement("textarea",{className:"modal-input--field",onChange:function(e){c(e.target.value)},value:s,"data-testid":"modal-input"})),l.a.createElement("td",null,l.a.createElement("div",{className:"modal-options"},l.a.createElement("button",{className:"button-accept",onClick:function(){return d({id:null===r||void 0===r?void 0:r.id,task:s})},"data-testid":"button-accept"},"Accept"),l.a.createElement("button",{className:"button-reject",onClick:u,"data-testid":"button-reject"}," Cancel ")))))))}),p=Object(i.lazy)((function(){return Promise.all([a.e(6),a.e(5)]).then(a.bind(null,40))}));t.default=l.a.memo((function(){var e=Object(i.useState)([]),t=Object(n.a)(e,2),a=t[0],s=t[1],c=Object(i.useState)(null),u=Object(n.a)(c,2),d=u[0],o=u[1],f=Object(i.useState)(!1),b=Object(n.a)(f,2),v=b[0],k=b[1],O=Object(i.useState)(),E=Object(n.a)(O,2),T=E[0],y=E[1];Object(i.useEffect)((function(){j()}),[s]);var j=function(){r.getTaskList(),r.subscribe((function(e){s(e)})),r.unsubscribe((function(){return null}))},N=function(){k(!1)};return l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"layout-container","data-testid":"layout"},l.a.createElement(h,{handleCloseModal:N,handleUpdateTask:function(e){r.updateTask(e.id,e.task),N(),o("")},modalItem:T,isOpen:v}),l.a.createElement("div",{className:"layout-add"},l.a.createElement(m,{handleChange:function(e){var t=e.target.value;o(t)},handleCreateNewTask:function(){r.addTask(d),o("")}})),l.a.createElement("div",{className:"layout-list","data-testid":"todo-list"},l.a.createElement(i.Suspense,{fallback:l.a.createElement("div",null,"Loading List...")},l.a.createElement(p,{handleDeleteTask:function(e,t){r.deleteTask(e,t)},handleOpenModal:function(e){k(!0);var t=a.find((function(t){return t.id===e}));y(t)},list:a})))))}))}}]);
//# sourceMappingURL=3.ec62d2bc.chunk.js.map